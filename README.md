# yiijobs

Yii module to manage scheduled jobs.

Create just one cronjob entry for YiiJobsRunnerCommand to run every 1 min with */1 * * * * /usr/bin/php /project/yiic yiijobsrunner

YiiJobsRunnerCommand will query and loop through active YiiJobs records that are not already currently running. YiiJobsRunnerCommand will run the command file and arguments associated with the YiiJob record if the command should run at the current time. All output generated by commands will be buffered and included in YiiOutput log record.

Using cron-expression from https://github.com/mtdowling/cron-expression to parse cron expression string and determine if job should run

Add alias for Cron namespace to config/main.php and config/console.php

Yii::setPathOfAlias('Cron', dirname(__FILE__) . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . 'common/lib/vendor/mtdowling/cron-expression/src/Cron');

TODO: cache query to get all active YiiJobs to run and update cache only when a YiiJob has been changed or added
